<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Funcionarios do setor</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="lista.css">

    <script>
        document.addEventListener("DOMContentLoaded", () => {
            const getQueryParam = (param) => {
                const urlParams = new URLSearchParams(window.location.search);
                return urlParams.get(param);
            };
    
            const setorId = getQueryParam("codigo");
    
            if (setorId) {
                const url = `http://localhost:8080/setores/${setorId}`; 
                console.log(setorId);
                fetch(url)
                    .then(response => {
                        if (!response.ok) {
                            throw new Error('Erro ao carregar o setor');
                        }
                        return response.json();
                    })
                    .then(setor => {
                        document.querySelector("h1").textContent = `Funcionários do Setor de ${setor.nome}`;
    
                        const listaFuncionarios = document.getElementById("lista-funcionarios");
                        const templateFuncionario = document.getElementById("template-funcionario");
                        templateFuncionario.remove();
    
                        setor.funcionarios.forEach(funcionario => {
                            const novoFuncionario = templateFuncionario.cloneNode(true);
                            novoFuncionario.querySelector(".imagem-funcionario img").src = funcionario.urlImagem;
                            novoFuncionario.querySelector("#nome-funcionario p").textContent = funcionario.nome;
                            listaFuncionarios.appendChild(novoFuncionario);
                        });
                    })
                    .catch(error => console.error('Erro ao carregar o setor:', error));
            } else {
                console.error('ID do setor não encontrado na URL');
            }
        });
    </script>

</head>
<body>
    <header></header>
    <article>
        <h1>Funcionarios _Nome do SETOR_</h1>
        <div id="funcionarios" class="main-content">
            <ul class="lista" id="lista-funcionarios">
                <li id="template-funcionario" >
                    <div class="card">
                        <a href="#">
                            <div class="imagem-funcionario">
                                <img src="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAkGBwgHBgkIBwgKCgkLDRYPDQwMDRsUFRAWIB0iIiAdHx8kKDQsJCYxJx8fLT0tMTU3Ojo6Iys/RD84QzQ5OjcBCgoKDQwNGg8PGjclHyU3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3N//AABEIAJQA3wMBIgACEQEDEQH/xAAaAAEAAgMBAAAAAAAAAAAAAAAABQYCAwQB/8QAOxAAAgIAAgUICAUEAwEAAAAAAAECAwQRBRUhU5ISMTNBUXGRsRMiNGFyc6HhMlKBwdEkQmKiI0PwFP/EABUBAQEAAAAAAAAAAAAAAAAAAAAB/8QAFBEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEQMRAD8AvgACgAAAAAAAAAAAAAAAAAAA9SbeSTb9x1U6NxV22NfJj2zeQHICap0NHZ6W3PPqiiJtrdVs63zxk0BrB6eAAAAAAAAAAAAAAAAAAAAB6eAAb6cJiL+jpk1+Z7F4ndToWyWXprFD3LaBFmVVc7XlXCUn7lmWCnRmFr2uHLa65nV6lcdnJjFfogIKnQ+Jnly+TWn+Z5vwO6nQ9EOlcrH4I3XaSwlTeVnLfZBZ/U4btMzeympR98nn9AJaqmulZVQjFe5GF2Mw9X47oprqW1levxmIu/HdLLsTyRz84Fqw2IrxNfpK28uVltWRC6bq5GM5S2RsWb7+Zm7QFvJssqe3lLlJeZ0abq5eFjYl60JfRgQR4engAAAAAAAAAAAADOuqy15VQlJ/4rMDAdRIU6IxFnSZVL3vN+CO+nRGHhtnKVj97yAgUuU8o7X2I6qdG4q3J+icI9sthYaqKqY5VVwh8KyNduMw9PSWxT7M82Bw06Fitt1zfuisvqd1OCw1PR1Rz7XtZxXaarWyiqUn2y2I4LtJ4q3NcvkJ9UNgFgttrpX/ACTjFe9nFdpjDw2VqVj92xeJAttvNtt9rebPAJG7S+JnsgoVr3bWcVl1ljzsnKXezAZN8yzYHsIynLkRTcnzJGU6Lq4cqyqcV2uJY8DhIYWiMUly2vWkuds6XzZAU/rBIaXwkcPcp1rKFnV2MjwN+Bt9DjKrOpSyfc9hZb61bTOHVJP9CpstOCt9Nhap9fJSfegKu04vJratjPDs0rV6LG2ZL1Zesv1OMAAAAAAAAAAABJ6Ct5OIlVn+NeRGG3DW+gxFdv5JZvu6wLRfaqKZ2STais8ktpEy0xbZONeGrjGU2opz2vN/Ql5RVsJQzzUo5Zlaw0HXj6YzW2N0U+/MDtuwmk7X/wAk00+pTyRo1TiuyPEWCUlGLk3sSzZxa1wf53wMCM1TiuyPENU4rsjxEnrTB7x8DGtMHvHwMCM1TiuyPENU4rsjxEnrTB7x8DGtMHvHwMCM1TiuyPEew0Ti4zjJRg8nnlyiS1pg94+BjWmD3j4GB3LagcOtMHvHwMa0we8fAyDHSuFtxUYKqKyTbebyI7VOK7I8RJ60we8fAxrTB7x8DKIzVOK7I8RKaLouw1Mq7ksuV6uTz5+c81pg94+BjWmD3j4GBhpXAzxUq5VZcqOaab6iPWiMV+WPESmtcHvHwM7E1KKlFc+3aQVKUeTJp55p5MxNuJ9pv+ZLzZqKAAAAAAAAB6eACy6Nu9Ng623tS5L7yPxtXo9M1SXNZOEvqZaAt220vm/El9H+x2aRq5VmFsS2wuin3ZgdF/QW/BLyKp/Ba7+gt+CXkVT+AABsopnfbGqtZylzAawZTjKuTjNOMlzpmIAAAADOuDssjCPPJ5IDFbebb3CUXH8UWu9FnwmErwtajFLlf3Sy2tm22qFsXGyKlF9TAqZ4dOPw3/y4mVazcXti32HMALdX0UPhXkiolur6KHwryQFWxPtN/wAyXmzUbcT7Tf8AMl5s1AAAAAAAAAAAB06Ot9DjK5t+rnk/1LNKKktvufgVHuLThLfT4Wuz80dveB7f0FvwS8iqfwWu/oLfgl5FU/gATWg8PyYyxE1z+rH9yIqrlbZCuHPJ5FrqrjVXGuC9WKyQHLj8DXio5vKNqXqyXkyv30zoscLYtSRbDnxeFrxUHGxbeqS50BVzKMZTbUU5NLPJI24rDWYWzkWLn5pdTJbQmG9HTK6SylZsWf5QII3YKxVYumcuaMlmSukNFqblbhmoz53DqfcQslKOcJrLJ7U+dAW/Z1de0NZogMJpW2iCrnFWwXNtyaNt+mpOOVFWUn1yeeQGvTtkZ4qMU83CO0jT2TcpOUnm289p4ALdX0UPhXkiolur6KHwryQFWxPtN/zJebNRtxPtN/zJebNQAAAAAAAAAAACc0FbyqJ0/klmu5kGd2h7vR4yMXzT9X/36gTt/QW/BLyKp/BbMQv6e34JeRVa4uc4wj+J7EBK6Cw+cpYiS5vVj+5Mo14aqNFEK4/2rLvZsIAAA14iivEVuu2PKi/oZwiowjGPMlkj0ADkx2Brxazl6ti5pL9zrAFVxOHtw0+RbHLPma5n3Gktl1Fd8HC2KcX9CAx2AswjzXr1dUuzvKOIHoA8LdX0UPhXkiolur6KHwryQFWxPtN/zJebNRtxPtN/zJebNQAAAAAAAAAAADfg/bKPmx8zQbsH7ZR8yPmBZsQ/6e34JeRXNGe34d/5fsWK/oLfgl5FawVkacVTZN5Ri9rAtQOLWuE3j4We60we9/1ZB2A49aYPe/RjWeE3v+rA7Acms8Jvf9WNZ4PfLwYHWDk1lhN8vBnuscJvo+DA6hlmmnk0+pnLrHCb6PgxrHCP/vj4MDhx+imk7MKtnO6/4Ih7G01k12ll1hhN/D6nFj1gMSuXHEQhZ29veUQxbq+ih8K8kVNrJtZp5da5i2V9FD4V5Igq2J9pv+ZLzZqNuJ9pv+ZLzZqKAAAAAAAAAAAG/Be2Yf5kfM0GdNnorq7Ms+RJSy7mBa7IKdco55cpNZ95F6kr38/BGOu3uFxfY8129wuL7AbNSV7+fghqSvfT8EYa7e4XF9hrt7hcX2IM9SV7+fgjzUle+n4Ix129wuL7DXb3C4vsBnqSvfz8ENSV7+fgjDXb3C4vsNdvcLi+wGepK99PwQ1JXvp+CMNdvcLi+w129wuL7AZ6kr38/BDUle+n4Iw129wuL7DXb3C4vsBnqSvfT8ENSV7+fgjDXb3C4vsNdvcLi+wGepa9/PwRKRWUUs9iSIjXb3C4vsNdy3C4gIzE+03/ADJebNRlOXLnKb/ueeRiUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB/9k=" alt="" srcset="">
                            </div>
                            <div class="card-titulo" id="nome-funcionario">
                                <p>_NomeFuncionario_</p>
                            </div>
                        </a>
                    </div>
                </li>
            </ul>
            <button> Novo Funcionário </button>
        </div>
    </article>
    <footer></footer>
</body>
</html>